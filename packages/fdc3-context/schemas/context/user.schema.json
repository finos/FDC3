{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://fdc3.finos.org/schemas/next/context/user.schema.json",
    "type": "object",
    "title": "User",
    "description": "A user identity, extending contact with authentication metadata.",
    "allOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "fdc3.user"
                },
                "name": {
                    "type": "string",
                    "description": "The human-readable name of the user"
                },
                "id": {
                    "type": "object",
                    "description": "User identifiers that uniquely identify this user across different systems",
                    "properties": {
                        "email": {
                            "type": "string",
                            "format": "email",
                            "description": "The user's email address as a unique identifier. If provided, this email must match the 'sub' field in the JWT token."
                        }
                    },
                    "additionalProperties": true
                },
                "jwt": {
                    "type": "string",
                    "description": "A JSON Web Token (JWT) asserting user identity and permissions. The JWT contains a header with cryptographic information and a payload with user claims. Header fields include: 'alg' (signature algorithm, e.g., 'EdDSA'), 'jku' (JSON Web Key Set URL for key verification), and 'kid' (key identifier). Payload fields include: 'iss' (issuer - the application issuing the token), 'aud' (audience - the intended recipient application), 'sub' (subject - the user identifier), 'exp' (expiration time as Unix timestamp), 'iat' (issued at time as Unix timestamp), and 'jti' (JWT ID - unique token identifier).",
                    "examples": [
                        "eyJhbGciOiJFZERTQSIsImprdSI6Imh0dHA6Ly9sb2NhbGhvc3Q6NDAwNS8ud2VsbC1rbm93bi9qd2tzLmpzb24iLCJraWQiOiJhcHAxLXNpZ25pbmcta2V5In0.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjQwMDUiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjQwMDMiLCJzdWIiOiJkZW1vLXVzZXIiLCJleHAiOjE3NTcwNjM0MjEsImlhdCI6MTc1NzA2MzEyMSwianRpIjoiMjE0OWQ5NDgtOWVhNy00ZmNjLTk1Y2ItN2Y1MjhhYjAwMjBkIn0.ap-OPusdBgBrubOuRzAQQcyukAHMqVuzR-j3eH5EzACHjbBguKDyby6M7-djrQEHObugF8XfCHCEaAYPRij_Cw"
                    ]
                }
            },
            "required": [
                "type",
                "jwt"
            ]
        },
        {
            "$ref": "context.schema.json#/definitions/BaseContext"
        }
    ],
    "examples": [
        {
            "type": "fdc3.user",
            "name": "Mr Demo User",
            "jwt": "eyJhbGciOiJFZERTQSIsImprdSI6Imh0dHA6Ly9sb2NhbGhvc3Q6NDAwNS8ud2VsbC1rbm93bi9qd2tzLmpzb24iLCJraWQiOiJhcHAxLXNpZ25pbmcta2V5In0.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjQwMDUiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjQwMDMiLCJzdWIiOiJkZW1vLXVzZXIiLCJleHAiOjE3NTcwNjM0MjEsImlhdCI6MTc1NzA2MzEyMSwianRpIjoiMjE0OWQ5NDgtOWVhNy00ZmNjLTk1Y2ItN2Y1MjhhYjAwMjBkIn0.ap-OPusdBgBrubOuRzAQQcyukAHMqVuzR-j3eH5EzACHjbBguKDyby6M7-djrQEHObugF8XfCHCEaAYPRij_Cw"
        }
    ]
}